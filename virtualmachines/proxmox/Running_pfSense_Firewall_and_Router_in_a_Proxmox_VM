▲A  A▼
Running pfSense Firewall and Router in a Proxmox VM
What is pfSense?
pfSense is a firewall/router computer software distribution based on FreeBSD. The open source pfSense Community Edition (CE) and pfSense Plus is installed on a physical computer or a virtual machine to make a dedicated firewall/router for a network. It can be configured and upgraded through a web-based interface, and requires no knowledge of the underlying FreeBSD system to manage. -https://en.wikipedia.org/wiki/PfSense
Download the pfSense AMD64 .iso Download
Extract the downloaded pfSense .gz
Log into the ProxMox web UI
Select a storage from the left navigation pane to upload the .iso to
Select ISO Images in the left sub-navigation pane
Upload the pfSense .iso file to the ProxMox ISO image library
Right click the ProxMox node name > Create VM
Type pfSense in the name field and set a unique VM ID > Next
On the OS tab, set the Type field to Linux, Version to 5.x - 2.6 Kernel and select the pfSense .iso in the ISO Image field > Next
On the System tab, leave the defaults > Next
On the Hard Disk tab, set the Disk size field to 8 > Next
On the CPU tab, set Cores field to 2, Type field to Host > Next
On the Memory tab, set the Memory to 1024 and Uncheck Ballooning Device > Next
On the Network tab, set the Model field to VirtIO (paravirtualized), Uncheck the Firewall box > Next
Verify the summary and click Finish
Click the pfSense VM in the left navigation menu > Select Hardware from the left sub-navigation menu
Click Add > Network Device
Set the Model field to VirtIO (paravirtualized), Uncheck the Firewall box > Click Add
Select Options from the left sub-navigation menu > Double click Use tablet pointer > Uncheck the Enabled box > Click OK
Right click the pfSense VM in the left navigation pane > Start
Click console in the left sub-navigation menu
Press Enter to Boot Multi- user
Select Install pfSense > Press Enter
Select the keyboard mapping to use > Press Enter
Select Auto (UFS) BIOS Guided Disk Setup > Press Enter
Wait for pfSense to copy files and install
At the Manual Configuration prompt select No > Press Enter
Select Reboot > Press Enter
Navigate back to the Hardware options
Double click the CD/DVD Drive > Select Do not use any media > Click OK
Select Shutdown > Reset > Yes to restart the VM
Click console in the left sub-navigation menu
Welcome to the pfSense terminal
Configuring Network Interfaces and Web UI
At the prompt to setup VLANs type n > Press Enter
Enter a WAN interface name > Press Enter
Enter a LAN interface name > Press Enter
When asked Do you want to proceed? type y > Press Enter
At the pfSense menu, select Set interface(s) IP address by typing 2 and pressing Enter
If asked to configure DHCP on the WAN interface type n > Press Enter
Enter a LAN IP address on the same subnet as your LAN
At the bit count prompt type 24 > Press Enter
Enter an IPv4 upstream gateway > Press Enter
At the IPv6 DHCP prompt type n > Press Enter
Leave the IPv6 address blank and press Enter
At the DHCP server prompt type n > Press Enter
At the revert to HTTP prompt type y > Press Enter
The http address of the pfSense Web UI will be displayed
Press Enter to return to the main menu
Open a new browser tab and navigate to the web UI http address
Log into the web UI with the username admin and password pfsense
Select System > User Manager from the top navigation
Click the edit icon across from the admin user
At the pfSense Welcome screen click Next and Next again
Enter a hostname, domain and DNS servers for the VM > Click Next
Set the server timezone > Click Next
Leave the defaults on the WAN Interface setup > Click Next
Set and confirm a new password for the admin user
Click the Reload button
Enjoy exploring pfSense
 
